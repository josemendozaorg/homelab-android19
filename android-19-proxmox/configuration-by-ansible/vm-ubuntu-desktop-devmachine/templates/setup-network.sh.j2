#!/bin/bash
# Network Configuration Script - Static IP Setup

echo "ðŸŒ Configuring static IP: {{ network_config.ip_address }}"

# Backup existing netplan configuration
sudo cp /etc/netplan/*.yaml /etc/netplan/backup/ 2>/dev/null || true

# Create new network configuration
sudo tee /etc/netplan/01-netcfg.yaml > /dev/null << EOF
network:
  version: 2
  renderer: networkd
  ethernets:
    {{ network_config.interface }}:
      addresses:
        - {{ network_config.ip_address }}/24
      gateway4: {{ network_config.gateway }}
      nameservers:
        addresses:
{% for dns in network_config.dns_servers %}
          - {{ dns }}
{% endfor %}
EOF

# Apply network configuration
sudo netplan apply

echo "âœ… Static IP configured: {{ network_config.ip_address }}"