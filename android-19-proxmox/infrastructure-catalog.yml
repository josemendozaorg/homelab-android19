---
# Infrastructure Catalog - Source of Truth for IDs and IPs
# All roles/playbooks should reference this catalog for ID and IP assignments
#
# Network Strategy (see docs/adr/002-homelab-network-strategy.md):
# - Physical hosts: .10-.19
# - Containers: .20-.99 (ID matches IP last octet)
# - VMs: .100-.199 (ID matches IP last octet)
# - DHCP pool: .200-.249
#
# To add a new service:
# 1. Choose appropriate IP range based on service type
# 2. Pick unused ID matching IP last octet if possible
# 3. Add entry with type: "container" or "vm"
# 4. Update role to use: catalog.services[ID]

# Services (both containers and VMs - unified to prevent ID conflicts)
# All services are provisioned by Terraform
services:
  125:
    name: "adguard"
    type: "container"
    ip: "192.168.0.25"
    description: "AdGuard Home DNS server"
    template: "debian-12-standard_12.12-1_amd64.tar.zst"
    resources:
      cores: 2
      memory: 1024
      disk: 16
    storage: "vm-storage"

  130:
    name: "test-nginx"
    type: "container"
    ip: "192.168.0.30"
    description: "Test container for Terraform provisioning"
    template: "debian-12-standard_12.12-1_amd64.tar.zst"
    resources:
      cores: 1
      memory: 512
      disk: 8
    storage: "vm-storage"

  101:
    name: "omarchy"
    type: "vm"
    ip: "192.168.0.101"
    description: "Omarchy development workstation (Arch Linux + Hyprland)"
    template: "omarchy-golden-template"
    cloud_init: true  # Deploy from golden template (not ISO)
    agent: true       # Enable QEMU guest agent for better integration
    onboot: false     # Manual start (development workstation)
    resources:
      cores: 16
      memory: 32768
      disk: 200
    storage: "vm-storage"



# Physical Infrastructure
physical:
  android16-bastion:
    ip: "192.168.0.10"

  android19-proxmox:
    ip: "192.168.0.19"
    node_name: "proxmox"
    api_port: 8006

# Network Configuration
network:
  subnet: "192.168.0.0/24"
  gateway: "192.168.0.1"
  dns: "192.168.0.25"  # AdGuard Home DNS server

  # IP Range Allocation Strategy
  ranges:
    router_gateway: "192.168.0.1-9"      # Router and network infrastructure
    physical_hosts: "192.168.0.10-19"    # Physical machines
    containers: "192.168.0.20-99"        # LXC containers
    virtual_machines: "192.168.0.100-199" # QEMU VMs
    dhcp_pool: "192.168.0.200-249"       # Dynamic allocation
    reserved: "192.168.0.250-254"        # Future use